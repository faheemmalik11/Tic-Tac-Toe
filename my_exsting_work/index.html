<!-- Enter your HTML code here -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Game Project</title>
    <link rel="stylesheet" href="style/sheet.css" />
    <script type="text/javascript" src="java/code.js"></script>
    <script
      type="text/javascript"
      src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>

  <body>
    <header>
      <h2>Welcome TO GamePoint</h2>
    </header>

    <div id="MainTable" class="Maintable">
      <p>Tick Tack Toe</p>
      <h1 id="Player1">
        Player 1 : <span id="player1Name"></span>&nbsp;<span
          id="player1Symbol"
        ></span>
      </h1>
      <h1 id="Player2">
        Player 2 :<span id="player2Name"></span>&nbsp;<span
          id="player2Symbol"
        ></span>
      </h1>
      <section class="container">
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
        <div class="tile"></div>
      </section>
      <br /><br /><br />
      <button id="startBtn" type="button">Start Game</button>
    </div>
    <footer>
      <h3>@copyright@</h3>
    </footer>

    <!----------------------------         java Scripts               ------------------------------>

    <script type="text/javascript">


      //  Accessing elementys in th DOM

      const mainTable = document.getElementsByClassName("MainTable");
      const tiles = Array.from(document.querySelectorAll(".tile"));
      const strtBtn = document.getElementById("startBtn");
      let board = ["", "", "", "", "", "", "", "", ""];
      var ply1 = document.getElementById("Player1").innerHTML;
      var ply2 = document.getElementById("Player2").innerHTML;

      //    unicode forcross and tick  symbols in javascript code

      const X = "\u2A2F";
      const O = "\uD83D\uDDF8";
// GLOBAL VARIABLES
      let currentPlayer = X;
      let isGameActive = true;

      const PLAYERX_WON = "PLAYERX_WON";
      const PLAYERO_WON = "PLAYERO_WON";
      const TIE = "TIE";

      const winningConditions = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6],
      ];
      
      // show a popUp window to take input for user name by using sweetAlert Method

      Swal.fire({
        title: "Enter Player Names",
        html: `<input type="text" id="p1Value"  placeholder="Player1 ">
            <input type="text" id="P2Value"  placeholder="Player2">`,
        confirmButtonText: "submit",
        focusConfirm: false,
        preConfirm: () => {
          const p1 = document.getElementById("p1Value").value;
          const p2 = document.getElementById("P2Value").value;

          if (p1 === "" || p2 === "") {
            Swal.showValidationMessage("Please enter both Player Names");
          }

          $("#player1Name").text(p1);
          $("#player1Symbol").text(X);
          $("#player2Name").text(p2);
          $("#player2Symbol").text(O);
        },
      });

	  // checks whether the specefic title is  already marked or not 
	  const isMarked = (tile) => {
        if (tile.innerText === X || tile.innerText === O) {
          return false;
        }

        return true;
      };

	  // function to display the name of winner
      const DisplayResult = (mode) => {
		const player1Name = $("#player1Name").text();
		const player2Name = $("#player2Name").text();



        switch (mode) {
          case PLAYERO_WON:
            Swal.fire({
              icon: "Success",
              title: `${player2Name} wins match`,
            });
            break;
          case PLAYERX_WON:
            Swal.fire({
              icon: "Success",
              title: `${player1Name} wins match`,
            });
            break;
          case TIE:
            Swal.fire({
              icon: "error",
              title: "Match Tie",
            });
        }
      };

      //    function to check the winning Conditions is true or not 
      function handleResultValidation() {
        let playerWins = false;
        for (let i = 0; i <= 7; i++) {
          const winCondition = winningConditions[i];

          const a = board[winCondition[0]];

          const b = board[winCondition[1]];

          const c = board[winCondition[2]];

          if (a === "" || b === "" || c === "") {
            continue;
          }

          if (a === b && b === c) {
            playerWins = true;
            break;
          }
        }
        if (playerWins) {
          DisplayResult(currentPlayer === X ? PLAYERX_WON : PLAYERO_WON);
          isGameActive = false;
          return;
        }

        if (!board.includes("")) DisplayResult(TIE);
      }

      // function to change player 

      const changePlayer = () => {
        currentPlayer = currentPlayer === X ? O : X;
      };


	  //  

      const userAction = (tile, index) => {
        if (isMarked(tile) && isGameActive) {
          tile.innerText = currentPlayer;

          board[index] = currentPlayer;

          handleResultValidation();
          changePlayer();
        }
      };

// add eventListener on each box

      tiles.forEach((tile, index) => {
        tile.addEventListener("click", () => userAction(tile, index));
      });

      // function to start  New game

      function resetgame() {
        board = ["", "", "", "", "", "", "", "", ""];
        isGameActive = true;

        tiles.forEach((tile) => {
          tile.innerText = "";
        });
        if (currentPlayer === "O") {
          changePlayer();
        }
      }
      strtBtn.addEventListener("click", resetgame);
    </script>
  </body>
</html>
